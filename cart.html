<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shopping Cart - Arif Store</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root { --primary: #e63946; --secondary: #1d3557; --light: #f8f9fa; --dark: #212529; }
    body { font-family: 'Poppins', sans-serif; background-color: var(--light); color: var(--dark); }
    .navbar { background: white; box-shadow: 0 4px 20px rgba(0,0,0,0.1); transition: all 0.3s; }
    .navbar.scrolled { padding: 0.7rem 0; box-shadow: 0 8px 30px rgba(0,0,0,0.15); }
    .navbar-brand { font-weight: 700; font-size: 1.8rem; color: var(--secondary) !important; }
    .nav-link { font-weight: 500; color: var(--dark) !important; padding: 0.5rem 1rem !important; border-radius: 8px; transition: all 0.3s; }
    .nav-link:hover, .nav-link.active { color: var(--primary) !important; background: rgba(230,57,70,0.1); }
    .cart-btn { background: var(--primary); color: white; width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; }
    .cart-btn:hover { background: #d62839; transform: scale(1.1); }
    .page-header { background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('images/shop.jpg'); background-size: cover; height: 40vh; display: flex; align-items: center; justify-content: center; color: white; text-align: center; }
    .page-header h1 { font-size: 3.5rem; font-weight: 700; }
    .cart-table img { width: 80px; height: 80px; object-fit: cover; border-radius: 10px; }
    .quantity-btn { width: 35px; height: 35px; border: 1px solid #ddd; background: white; color: var(--dark); }
    .quantity-input { width: 60px; text-align: center; border: 1px solid #ddd; }
    .btn-remove { color: var(--primary); font-size: 1.3rem; }
    .btn-remove:hover { color: #d62839; }
    .btn-checkout { background: var(--primary); color: white; border-radius: 50px; padding: 12px 40px; font-weight: 600; }
    .whatsapp-float { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: #25d366; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); z-index: 1000; }
  </style>
</head>
<body>

<a href="https://wa.me/923439851166" class="whatsapp-float" target="_blank">
  <i class="fab fa-whatsapp"></i>
</a>

<nav class="navbar navbar-expand-lg fixed-top">
  <div class="container">
    <a class="navbar-brand" href="index.html">
      <img src="images/logo.png" alt="Arif Store" height="45" class="me-2">
      Arif Store
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="product.html">Products</a></li>
        <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
        <li class="nav-item"><a class="nav-link" href="contact.html">Contact Us</a></li>
      </ul>
      <div class="d-flex align-items-center">
        <a href="cart.html" class="cart-btn position-relative me-3">
          <i class="bi bi-cart3"></i>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger cart-badge cart-count">0</span>
        </a>
      </div>
    </div>
  </div>
</nav>

<div class="page-header">
  <div>
    <h1>Shopping Cart</h1>
    <p>Review your items before checkout</p>
  </div>
</div>

<section class="py-5">
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
          <div class="card-body p-4">
            <table class="table cart-table align-middle" id="cartTable">
              <tbody id="cartItemsBody">
                <!-- یہاں ڈائنامک آئٹمز آئیں گے -->
              </tbody>
            </table>
            <div id="emptyCartMsg" class="text-center py-5 d-none">
              <h4>آپ کا کارٹ خالی ہے</h4>
              <a href="product.html" class="btn btn-primary mt-3">Shop Now</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="card border-0 shadow-sm">
          <div class="card-body p-4">
            <h5 class="mb-4">Order Summary</h5>
            <div class="d-flex justify-content-between mb-3">
              <span>Subtotal</span>
              <span class="fw-bold" id="subtotal">Rs 0</span>
            </div>
            <div class="d-flex justify-content-between mb-3">
              <span>Shipping</span>
              <span>Free</span>
            </div>
            <hr>
            <div class="d-flex justify-content-between mb-4">
              <h5>Total</h5>
              <h5 class="text-danger" id="total">Rs 0</h5>
            </div>
            <a id="checkoutBtn" href="#" class="btn btn-checkout w-100" target="_blank">
              Proceed to Checkout via WhatsApp
            </a>
            <div class="text-center mt-3">
              <a href="product.html" class="text-muted">Continue Shopping</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<footer class="bg-dark text-white py-5 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <h4>Arif Store</h4>
        <p>Your trusted store for quality products.</p>
      </div>
      <div class="col-md-4">
        <h5>Quick Links</h5>
        <ul class="list-unstyled">
          <li><a href="index.html" class="text-white">Home</a></li>
          <li><a href="product.html" class="text-white">Products</a></li>
          <li><a href="about.html" class="text-white">About Us</a></li>
          <li><a href="contact.html" class="text-white">Contact</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <h5>Contact</h5>
        <p><i class="bi bi-whatsapp"></i> +92 343 9851166</p>
      </div>
    </div>
    <hr>
    <p class="text-center mb-0">© 2025 Arif Store. All Rights Reserved.</p>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  window.addEventListener('scroll', () => {
    document.querySelector('.navbar').classList.toggle('scrolled', window.scrollY > 50);
  });

  // کارٹ لوڈ کرنے اور دکھانے کا کوڈ
  function loadCart() {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const tbody = document.getElementById("cartItemsBody");
    const subtotalEl = document.getElementById("subtotal");
    const totalEl = document.getElementById("total");
    const emptyMsg = document.getElementById("emptyCartMsg");
    const checkoutBtn = document.getElementById("checkoutBtn");

    tbody.innerHTML = ''; // پرانی لائنیں ہٹا دو

    if (cart.length === 0) {
      emptyMsg.classList.remove('d-none');
      subtotalEl.textContent = 'Rs 0';
      totalEl.textContent = 'Rs 0';
      checkoutBtn.href = '#';
      return;
    }

    emptyMsg.classList.add('d-none');

    let subtotal = 0;

    cart.forEach((item, index) => {
      const itemTotal = item.price * item.quantity;
      subtotal += itemTotal;

      const row = `
        <tr>
          <td class="text-center">
            <img src="${item.img}" alt="${item.title}">
          </td>
          <td>
            <h6 class="mb-1">${item.title}</h6>
            <small class="text-muted">Quantity: ${item.quantity}</small>
          </td>
          <td>Rs ${item.price}</td>
          <td>
            <div class="d-flex align-items-center justify-content-center">
              <button class="btn quantity-btn decrease" data-index="${index}">-</button>
              <input type="text" class="form-control quantity-input mx-2" value="${item.quantity}" readonly>
              <button class="btn quantity-btn increase" data-index="${index}">+</button>
            </div>
          </td>
          <td class="fw-bold">Rs ${itemTotal}</td>
          <td><a href="#" class="btn-remove remove-item" data-index="${index}"><i class="bi bi-trash"></i></a></td>
        </tr>
      `;
      tbody.innerHTML += row;
    });

    subtotalEl.textContent = `Rs ${subtotal}`;
    totalEl.textContent = `Rs ${subtotal}`;

    // واٹس ایپ چیک آؤٹ لنک
    const message = cart.map(item => `${item.quantity} x ${item.title}`).join('%0A');
    checkoutBtn.href = `https://wa.me/923439851166?text=میری آرڈر:%0A${message}%0A%0Aٹوٹل: Rs ${subtotal}`;
  }

  // کوآنٹیٹی بڑھانے / گھٹانے اور ہٹانے کا کام
  document.addEventListener('click', function(e) {
    if (e.target.classList.contains('increase') || e.target.classList.contains('decrease') || e.target.closest('.remove-item')) {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const index = parseInt(e.target.dataset.index || e.target.closest('[data-index]').dataset.index);

      if (e.target.classList.contains('increase')) {
        cart[index].quantity += 1;
      } else if (e.target.classList.contains('decrease')) {
        if (cart[index].quantity > 1) cart[index].quantity -= 1;
      } else if (e.target.closest('.remove-item')) {
        cart.splice(index, 1);
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      loadCart();
      updateCartCountInNavbar();
    }
  });

  // navbar میں کارٹ بیج اپ ڈیٹ (اگر navbar میں بھی ہے)
  function updateCartCountInNavbar() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let total = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.querySelectorAll('.cart-count, .cart-badge').forEach(el => {
      el.textContent = total;
    });
  }

  // صفحہ لوڈ ہوتے ہی کارٹ دکھاؤ
  loadCart();
  updateCartCountInNavbar();
</script>
</body>
</html>